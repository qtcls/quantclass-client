#!/bin/bash
clear
BLACK="\033[0;30m"  
DARK_GRAY="\033[1;30m"  
BLUE="\033[0;34m"  
LIGHT_BLUE="\033[1;34m"  
GREEN="\033[0;32m"  
LIGHT_GREEN="\033[1;32m"  
CYAN="\033[0;36m"  
LIGHT_CYAN="\033[1;36m"  
RED="\033[0;31m"  
LIGHT_RED="\033[1;31m"  
PURPLE="\033[0;35m"  
LIGHT_PURPLE="\033[1;35m"  
BROWN="\033[0;33m"  
YELLOW="\033[0;33m"  
LIGHT_GRAY="\033[0;37m"  
WHITE="\033[1;37m" 
NC="\033[0m"

echo ""
echo ""

parentPath=$( cd "$(dirname "${BASH_SOURCE[0]}")" ; pwd -P )
cd "$parentPath"
appPath=$( find "$parentPath" -name '*.app' -maxdepth 1)
appName=${appPath##*/}
appBashName=${appName// /\ }
appDIR="/Applications/${appBashName}"
echo ""
echo ""
echo -e "ã€${appBashName} å·²æŸåï¼Œæ— æ³•æ‰“å¼€/ æ¥è‡ªèº«ä»½ä¸æ˜çš„å¼€å‘è€…ã€ç­‰é—®é¢˜ä¿®å¤å·¥å…·"
echo ""
#æœªå®‰è£…APPæ—¶æé†’å®‰è£…ï¼Œå·²å®‰è£…ç»•è¿‡å…¬è¯
if [ ! -d "$appDIR" ];then
  echo ""
  echo -e "æ‰§è¡Œç»“æœï¼š${RED}æ‚¨è¿˜æœªå®‰è£… ${appBashName} ï¼Œè¯·å…ˆå®‰è£…${NC}"
  else
  #ç»•è¿‡å…¬è¯
  echo -e "${YELLOW}è¯·è¾“å…¥å¼€æœºå¯†ç ï¼Œè¾“å…¥å®ŒæˆåæŒ‰ä¸‹å›è½¦é”®ï¼ˆè¾“å…¥è¿‡ç¨‹ä¸­å¯†ç æ˜¯çœ‹ä¸è§çš„ï¼‰${NC}"
  sudo spctl --master-disable
  sudo xattr -d com.apple.quarantine /Applications/"$appBashName"
  echo ""
  echo ""
  echo -e "æ‰§è¡Œç»“æœï¼š${GREEN}ä¿®å¤æˆåŠŸï¼${NC}æ‚¨ç°åœ¨å¯ä»¥æ­£å¸¸è¿è¡Œ ${appBashName} äº†ã€‚"
  echo -e ""

fi
echo ""
echo ""
echo -e "æœ¬çª—å£å¯ä»¥å…³é—­äº†ï¼ŒğŸ‘‹"